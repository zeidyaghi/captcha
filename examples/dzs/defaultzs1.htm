
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="rtl">

<head>

<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Add Comments أضف لاحظاتك في دفتر الزوّار</title>

<style>
 #mainCaptcha{
	background-image:url('captcha-bg.png');
	width:94px;
	font-size:large;
	font-style:italic;
	font-weight:bold;color:navy;
	
}
 
	
 </style>

<script type="text/javascript">

         function generateCaptcha()
         {
             var alpha = new Array('A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z');
             var i;
             for (i=0;i<4;i++){
               var a = alpha[Math.floor(Math.random() * alpha.length)];
               var b = alpha[Math.floor(Math.random() * alpha.length)];
               var c = alpha[Math.floor(Math.random() * alpha.length)];
               var d = alpha[Math.floor(Math.random() * alpha.length)];
              }
            var code = a + ' ' + b + ' ' + ' ' + c + ' ' + d;
            document.getElementById("mainCaptcha").value = code
          }
          function CheckValidCaptcha(){
              var string1 = removeSpaces(document.getElementById('mainCaptcha').value);
              var string2 = removeSpaces(document.getElementById('txtInput').value);
              if (string1 == string2){
         document.getElementById('success').innerHTML = "OK :تم التحقق بنجاح"
         //alert("Form is validated Successfully");
                 document.getElementById('error').innerHTML = "";
                return true;
                
              }
              else{       
         document.getElementById('error').innerHTML = "من فضلك،ادخل رمزاً مطابقاً"; 
         //alert("Please enter a valid captcha.");
                document.getElementById('success').innerHTML = "";
                return false;
               
         
              }
          }
           
          function removeSpaces(string){
            return string.split(' ').join('');
          }
          function removeContent(){
          // document.getElementById('mainCaptcha').value)="";
           //document.getElementById('txtInput').value) = "";
          // document.getElementById('success').innerHTML.style.display = "none";
           //document.getElementById('error').innerHTML.style.display = "none";
}
      </script>    
   </head>

<body style="width: 480px; margin-right: 400px; " onload="generateCaptcha();">
<center>

<p ><b><font face="Arial" color="#008000" size="3">مرحباً بكم في دفتر 
الزوّار،ملاحظاتكم تسعدنا.   </font>
<font face="Arial" color="#000080" size="3">ادخل المعلومات ورمز التحقق،من فضلك.<span lang="ar-sa"> </span></font>
</b></p>
 <img src="gb2.gif" alt="أهلاً بكم"/>
 <!-- انشاء معرّف الرساله -->
<div id="message" style="background:black; color:#00FF00; text-align:center; width:468px; display:none;">
    <strong>!Message Sent تم إرسال الرسالة</strong>
</div>
<!-- نهاية معرّف الرساله  -->

<form id="commentForm" action="" method="post" dir="rtl" style="width: 468px">

 
  <p>المعلومات</p>
<input name="name" type="text"  style="border:1px red solid" autofocus placeholder="الاسم الكامل" required />
<br/>
<br/>
<input name="email" type="text" autofocus placeholder="البريد الالكتروني" />
<br/>
<br/>
<input name="website" type="text" autofocus placeholder="الموقع الالكتروني" />
<br/>
<br/>
<textarea name="comment" cols="20" rows="2"  style="border:1px red solid" autofocus placeholder="ملاحظات" required>
</textarea>
<br/>
<br/>


  <p>رمز التحقق</p>    
   <!--<body onload="generateCaptcha();">-->
      
         <table>
            <tr>
               <td> <span id="success" style="color:green" ></span>
               </td>
            </tr>
            <tr>
               <td>
                 <input type="text" id="mainCaptcha"readonly="readonly" />&nbsp;&nbsp;&nbsp;&nbsp; 
				 <img src="refresh.gif" onclick="generateCaptcha();" alt="Refresh" longdesc="تحديث الرمز"> </img>
                  <!--<input type="button" id="refresh" value="Refresh" onclick="generateCaptcha();" />-->
                  &nbsp;</td>
            </tr>
            <tr>
               <td>
                  <input type="text" id="txtInput" maxlength="4" style="width: 85px" autofocus placeholder="ادخل الرمز هنا" required/> <input id="Button1" type="button" value="تحقق من الرمز" onclick="CheckValidCaptcha();"/>
               </td>
            </tr>
            <tr>
               <td><span id="error" style="color:red"></span></td>
                  
            </tr>
            </table>
    <input id="submitBtn" name="Submit1" type="button" value="ارسال" title="ارسال المعلومات" />
    <!--  إضافة معرّف id للزر: أضفنا id="submitBtn" للزر الخاص بالإرسال لتسهيل الوصول إليه من خلال الجافا سكريبت -->
</form>
 <img src="gb22.png" alt="أهلاً بكم"/>
 
</center>
 <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js'></script>
<!-- لجافا سكريبت:

استخدمنا jQuery لاختيار الزر ومعالجة الحدث click.
عند الضغط على الزر، يتم عرض الرسالة 

عبر تغيير خاصية display إلى block.

تغيير نوع الزر: تم تغيير نوع الزر من submit إلى button لأنه في حال استخدام زر من نوع submit، سيتم 

تنفيذ عملية إرسال النموذج بشكل افتراضي، مما قد يؤدي إلى إعادة تحميل الصفحة. 
إذا كنت بحاجة إلى إرسال البيانات عبر الجافا سكريبت، يمكنك استبدال الكود المطلوب في مكان التعليق المخصص.

بهذا التحديث، 
سيتم عرض الرسالة عند الضغط على زر "إرسال".   -->
<script>
$(document).ready(function() {
    $("#submitBtn").click(function(event) {  
        event.preventDefault(); // منع الإرسال التلقائي للنموذج

        // التحقق من الحقول المطلوبة
        const name = $('input[name="name"]').val().trim();
        const comment = $('textarea[name="comment"]').val().trim();
        const captcha = $('#txtInput').val().trim();

        if (name === "" || comment === "") {
            alert("يرجى إدخال الاسم والملاحظات قبل المتابعة.");
            return;  // إيقاف العملية إذا كانت الحقول المطلوبة فارغة
        }

        // التحقق من الكابتشا
        if (!CheckValidCaptcha()) {  
            alert("رمز التحقق غير مُدخل!. ادخله من فضلك!!");
            return;  // إيقاف العملية إذا كانت الكابتشا غير صحيحة
        }

        // إذا كانت الحقول والكابتشا صحيحة، يمكن إرسال النموذج
        $("#commentForm").submit();  // إرسال النموذج بعد التحقق
        // إظهار رسالة النجاح
        $("#message").css("display", "block");
       // $("#submitBtn").css("display", "none");

        
        // هنا يمكنك إضافة الكود لإرسال البيانات إذا كنت بحاجة إلى ذلك
        // كود إرسال البيانات سيكون هنا
    });
});
</script>
</body>
</html>
